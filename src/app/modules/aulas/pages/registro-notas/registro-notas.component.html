<div class="container">
  <div class="title">
    <h2>Registro de notas</h2>
  </div>
  <form [formGroup]="form" autocomplete="off">
  <mat-divider style="margin-bottom: 20px"></mat-divider>
  <div class="cards" *ngIf="claseEncontrada">
    <!-- <mat-card class="card" *ngIf="notas_estudiantes[0].bimestre.nombre"><mat-icon>calendar_today</mat-icon> {{claseEncontrada. | uppercase}}</mat-card> -->
    <mat-card class="card"><mat-icon>water_damage</mat-icon>{{claseEncontrada.aula.nombre | uppercase}} {{claseEncontrada.aula.seccion | uppercase}}</mat-card>
    <mat-card class="card"><mat-icon>person</mat-icon>{{claseEncontrada.docente.nombres | uppercase}} {{claseEncontrada.docente.apellidos | uppercase}}</mat-card>
    <mat-card class="card"><mat-icon>menu_book</mat-icon>{{claseEncontrada.curso.nombre}}</mat-card>
    
  </div>

  <div style="width: 100%; overflow: auto;">
    
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z1">
  
          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->
        
          <!-- Position Column -->
          <ng-container matColumnDef="Nombres" sticky>
            <th mat-header-cell *matHeaderCellDef> Nombres y Apellidos </th>
            <td mat-cell *matCellDef="let nota; let i = index;" [formGroup]="nota">
              <!-- {{nota.estudiante.nombres}}  -->
              <div class="nombre_estudiante">
                <div class="index">{{i + 1}}. </div>
                <input type="text" formControlName="nombreEstudiante">
              </div>
  
            </td>
          </ng-container>
        
          <!-- Name Column -->
          <ng-container matColumnDef="Sem 1">
            <th mat-header-cell *matHeaderCellDef> Sem 1 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
                <mat-form-field floatLabel="never" class="nota"
                 [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_1.value) < NOTA_APROBATORIA && 
                 cambiarStringToNumber(nota.controls.nota_semana_1.value) != 0 ? 'desaprobado':''" 
                 appearance="outline">
                  <input matInput   formControlName="nota_semana_1" maxlength="2" max="20" (keypress)="numberOnly($event)">
                </mat-form-field>
            </td>
          </ng-container>
        
          <!-- Weight Column -->
          <ng-container matColumnDef="Sem 2">
            <th mat-header-cell *matHeaderCellDef> Sem 2 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota"
               [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_2.value) < NOTA_APROBATORIA && 
               cambiarStringToNumber(nota.controls.nota_semana_2.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput   formControlName="nota_semana_2" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
        
          <!-- Symbol Column -->
          <ng-container matColumnDef="Sem 3">
            <th mat-header-cell *matHeaderCellDef> Sem 3 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota" > 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_3.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_3.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_3" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Sem 4">
            <th mat-header-cell *matHeaderCellDef> Sem 4 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_4.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_4.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_4" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Sem 5">
            <th mat-header-cell *matHeaderCellDef> Sem 5 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_5.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_5.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_5" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Sem 6">
            <th mat-header-cell *matHeaderCellDef> Sem 6 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_6.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_6.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_6" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Sem 7">
            <th mat-header-cell *matHeaderCellDef> Sem 7 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_7.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_7.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_7" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Sem 8">
            <th mat-header-cell *matHeaderCellDef> Sem 8 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_semana_8.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_semana_8.value) != 0 ? 'desaprobado':''" appearance="outline">
                <input matInput  formControlName="nota_semana_8" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 1">
            <th mat-header-cell *matHeaderCellDef> Tarea 1 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_1.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_1.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_1" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 2">
            <th mat-header-cell *matHeaderCellDef> Tarea 2 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_2.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_2.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_2" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 3">
            <th mat-header-cell *matHeaderCellDef> Tarea 3 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_3.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_3.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_3" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 4">
            <th mat-header-cell *matHeaderCellDef> Tarea 4 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_4.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_4.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_4" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 5">
            <th mat-header-cell *matHeaderCellDef> Tarea 5 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_5.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_5.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_5" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 6">
            <th mat-header-cell *matHeaderCellDef> Tarea 6 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_6.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_6.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_6" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 7">
            <th mat-header-cell *matHeaderCellDef> Tarea 7 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_7.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_7.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_7" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Tarea 8">
            <th mat-header-cell *matHeaderCellDef> Tarea 8 </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_tarea_8.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_tarea_8.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_tarea_8" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Examen">
            <th mat-header-cell *matHeaderCellDef> Examen bimestral </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" 
              [ngClass]="cambiarStringToNumber(nota.controls.nota_examen_final.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.nota_examen_final.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="nota_examen_final" maxlength="2" max="20" required>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="Promedio">
            <th mat-header-cell *matHeaderCellDef> Promedio Final </th>
            <td mat-cell *matCellDef="let nota" [formGroup]="nota"> 
              <mat-form-field floatLabel="never" class="nota" disabled
              [ngClass]="cambiarStringToNumber(nota.controls.promedio_final.value) < NOTA_APROBATORIA && 
              cambiarStringToNumber(nota.controls.promedio_final.value) != 0 ? 'desaprobado':''" appearance="outline"> 
                <input matInput  formControlName="promedio_final">
              </mat-form-field>
            </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
  </div>
  
    <div class="buttons">
      <button mat-raised-button color="primary" (click)="guardarNotas()" [disabled]="form.invalid">Guardar notas</button>
      <button mat-stroked-button color="basic" (click)="retroceder()" ><mat-icon>arrow_back</mat-icon> Regresar</button>
    </div>
  </form>
</div>